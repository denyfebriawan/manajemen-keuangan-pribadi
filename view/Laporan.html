<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Title -->
    <title>ArthaPlan</title>

    <!-- Custom Style CSS -->
    <link href="../src/input.css" rel="stylesheet" />
    <link href="../src/output.css" rel="stylesheet" />

    <!-- icon logo -->
    <link
      rel="shortcut icon"
      href="../assets/images/logo-SVG.svg"
      type="image/x-icon"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script
      src="https://kit.fontawesome.com/cc43265ffa.js"
      crossorigin="anonymous"
    ></script>

    <!-- Script Diagram -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <!-- Script flowbite -->
    <script src="../node_modules/flowbite/dist/flowbite.min.js"></script>

    <link
      href="https://unpkg.com/flowbite@latest/dist/flowbite.min.css"
      rel="stylesheet"
    />

    <!-- script custom -->
    <script src="../js/script.js" defer></script>
  </head>
  <body class="bg-base font-display">
    <!-- Navbar -->
    <header>
      <nav
        class="sticky bg-primary-dark px-4 lg:px-6 py-2.5 m-4 @max-[1020px]:rounded-full rounded-2xl shadow-lg"
      >
        <div
          class="flex flex-wrap items-center justify-between max-w-screen-xl mx-auto"
        >
          <!-- Menu mobile  -->
          <button
            data-collapse-toggle="mobile-menu-2"
            type="button"
            class="lg:hidden inline-flex h-8 w-8 items-center justify-center rounded-md p-2 text-accent bg-primary-soft hover:bg-accent hover:text-light focus:outline-none focus:ring-2 focus:ring-inset focus:ring-light cursor-pointer"
            aria-controls="mobile-menu-2"
            aria-expanded="false"
          >
            <i class="fa fa-bars fa-lg" aria-hidden="true"></i>
          </button>

          <!-- logo -->
          <a href="#" class="flex items-center">
            <img
              src="../assets/images/logo-SVG.svg"
              class="h-6 mr-3 sm:h-9"
              alt="Flowbite Logo"
            />
            <span
              class="self-center text-xl font-semibold whitespace-nowrap dark:text-white"
              >ArthaPlan</span
            >
          </a>

          <!-- Right Buttons -->
          <div class="flex items-center gap-2 lg:order-2">
            <!-- Tombol Modal Plus -->
            <button
              onclick="toggleModal()"
              class="relative flex items-center justify-center w-8 h-8 text-md text-light bg-accent rounded-full cursor-pointer hover:bg-primary-soft focus:outline-none focus:ring-2 focus:ring-light focus:ring-offset-2 focus:ring-offset-primary-dark transition duration-300 ease-in-out"
            >
              <i class="fa fa-plus fa-md" aria-hidden="true"></i>
            </button>

            <!-- Modal Transaksi Baru -->
            <div
              id="modal"
              class="fixed inset-0 z-50 flex items-center justify-center hidden bg-dark/50"
            >
              <div
                class="relative w-full max-w-md p-2 bg-light rounded-2xl shadow-lg"
              >
                <!-- Header Modal -->
                <div
                  class="flex items-center justify-between bg-accent p-4 border-b rounded-t-lg md:p-5"
                >
                  <h3 class="text-lg font-semibold text-primary-dark">
                    Transaksi Baru
                  </h3>
                  <button
                    onclick="toggleModal()"
                    class="text-dark hover:text-accent"
                  >
                    <i class="fas fa-xmark"></i>
                  </button>
                </div>

                <!-- Body Modal -->
                <form class="p-4 md:p-6">
                  <div class="grid grid-cols-1 gap-4 mb-4 sm:grid-cols-2">
                    <!-- Kategori -->
                    <div class="sm:col-span-1">
                      <label
                        for="category"
                        class="block mb-2 text-sm font-medium text-dark"
                        >Kategori</label
                      >
                      <input
                        type="text"
                        id="Kategori"
                        name="Kategori"
                        placeholder="Makanan"
                        required
                        class="block w-full p-2.5 text-sm text-dark bg-gray-50 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent"
                      />
                    </div>

                    <!-- Jenis Transaksi -->
                    <div class="sm:col-span-1">
                      <label
                        for="jenis-transaksi"
                        class="block mb-2 text-sm font-medium text-dark"
                        >Jenis Transaksi</label
                      >
                      <select
                        id="jenis-transaksi"
                        class="block w-full p-2.5 text-sm text-dark bg-gray-50 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent"
                      >
                        <option selected>Pilih Jenis</option>
                        <option value="In">Pemasukan</option>
                        <option value="Out">Pengeluaran</option>
                      </select>
                    </div>

                    <!-- Nominal -->
                    <div class="sm:col-span-1">
                      <label
                        for="price"
                        class="block mb-2 text-sm font-medium text-dark"
                        >Nominal</label
                      >
                      <input
                        type="number"
                        id="price"
                        name="price"
                        placeholder="100.000"
                        required
                        class="block w-full p-2.5 text-sm text-dark bg-gray-50 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent"
                      />
                    </div>

                    <!-- Tanggal -->
                    <div class="sm:col-span-1">
                      <label
                        for="datepicker-autohide"
                        class="block mb-2 text-sm font-medium text-dark"
                        >Tanggal</label
                      >
                      <div class="relative w-full">
                        <div
                          class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                        >
                          <i class="fa fa-calendar" aria-hidden="true"></i>
                        </div>
                        <input
                          id="datepicker-autohide"
                          type="text"
                          placeholder="Select date"
                          datepicker
                          datepicker-autohide
                          class="block w-full pl-10 p-2.5 text-sm text-dark bg-gray-50 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent"
                        />
                      </div>
                    </div>

                    <!-- Keterangan -->
                    <div class="col-span-2">
                      <label
                        for="keterangan"
                        class="block mb-2 text-sm font-medium text-dark"
                        >Keterangan</label
                      >
                      <textarea
                        id="keterangan"
                        name="keterangan"
                        rows="3"
                        required
                        placeholder="Keterangan"
                        class="block w-full p-2.5 text-sm text-dark bg-gray-50 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent resize-none"
                      ></textarea>
                    </div>
                  </div>

                  <!-- Footer Modal -->
                  <div class="flex items-center justify-end mt-6 gap-2">
                    <!-- Tombol Aksi -->
                    <button
                      type="button"
                      onclick="toggleModal()"
                      class="px-4 py-2 text-dark bg-gray-300 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out"
                    >
                      Batal
                    </button>
                    <button
                      type="submit"
                      class="px-4 py-2 text-white bg-accent rounded-lg hover:bg-primary transition duration-300 ease-in-out"
                    >
                      Simpan
                    </button>
                  </div>
                </form>
              </div>
            </div>
            <!-- End Modal Transaksi -->

            <!-- Dropdown Profile -->
            <div class="relative">
              <button
                type="button"
                class="flex items-center justify-center w-8 h-8 text-sm bg-primary-soft rounded-full hover:bg-accent focus:outline-none focus:ring-2 focus:ring-light focus:ring-offset-2 focus:ring-offset-primary-dark transition duration-300 ease-in-out"
                aria-expanded="false"
                data-dropdown-toggle="dropdown-user"
              >
                <span class="sr-only">Open user menu</span>
                <i class="fa fa-user text-light text-md" aria-hidden="true"></i>
              </button>

              <!-- Dropdown Menu -->
              <div
                id="dropdown-user"
                class="absolute right-2 z-50 hidden w-48 mt-2 bg-primary rounded-lg shadow-lg"
              >
                <div class="px-4 py-3 text-sm text-light">
                  <p class="font-medium">Neil Sims</p>
                  <p>neil.sims@gmail.com</p>
                </div>
                <ul
                  class="py-1 text-sm text-dark bg-light rounded-b-lg shadow-lg"
                >
                  <li>
                    <a
                      href="#"
                      class="block px-4 py-2 hover:bg-primary hover:text-light"
                      >Ubah Password</a
                    >
                  </li>
                  <li>
                    <a
                      href="Landing.html"
                      class="block px-4 py-2 hover:bg-primary hover:text-light"
                      >Logout</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div
            class="items-center justify-between hidden w-full lg:flex lg:w-auto lg:order-1"
            id="mobile-menu-2"
          >
            <ul
              class="flex flex-col mt-4 font-medium space-y-1 lg:flex-row lg:space-x-8 lg:mt-0"
            >
              <li>
                <a
                  href="Dashboard.html"
                  class="block rounded-md pl-3 pr-4 py-2 text-sm lg:text-lg font-medium text-light bg-primary-soft hover:bg-accent hover:text-light"
                  >Beranda</a
                >
              </li>
              <li>
                <a
                  class="block py-2 pl-3 pr-4 rounded-md bg-accent text-sm lg:text-lg font-medium text-light"
                  aria-current="page"
                  href="Laporan.html"
                  >Laporan</a
                >
              </li>
              <li>
                <a
                  href="riwayat_transaksi.html"
                  class="block rounded-md pl-3 pr-4 py-2 text-sm lg:text-lg font-medium text-light bg-primary-soft hover:bg-accent hover:text-light"
                  >Riwayat</a
                >
              </li>
              <li>
                <a
                  href="anggaran.html"
                  class="block rounded-md pl-3 pr-4 py-2 text-sm lg:text-lg font-medium text-light bg-primary-soft hover:bg-accent hover:text-light"
                  >Anggaran</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <!-- Navbar -->

    <!-- Content -->
    <div class="p-6 mb-6">
      <!-- Card Section -->
      <div
        class="grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-2"
      >
        <!-- Anggaran -->
        <section class="rounded-2xl bg-white shadow-lg p-6">
          <!-- Judul -->
          <h2
            class="text-xl p-4 font-bold text-center text-white bg-green-500 rounded-lg shadow-lg uppercase mb-4"
          >
            laporan Pemasukkan
          </h2>

          <!-- Chart Pemasukkan -->
          <div class="bg-light rounded-lg shadow-lg">
            <div
              id="totalPemasukkan"
              class="p-2 font-bold text-primary text-center bg-green-300 shadow-md mb-2 rounded-t-lg"
            ></div>
            <div
              id="lineChartPemasukkan"
              class="bg-white p-4 rounded-b-lg"
            ></div>
          </div>
        </section>

        <!-- Riwayat Transaksi -->
        <section class="rounded-2xl bg-white shadow-lg p-4">
          <div class="w-full md:w-1/2">
            <h2
              class="text-center font-bold text-primary mb-2 bg-green-300 p-2 rounded shadow-md"
            >
              Peringkat Kategori
            </h2>
            <div id="pieChartPemasukkan" class="w-full h-64"></div>
          </div>
          <div class="w-full md:w-1/2">
            <div id="progress-list-pemasukkan" class="space-y-4"></div>
          </div>
        </section>

        <!-- Laporan (Pie Chart) -->
        <section class="rounded-2xl bg-white shadow-lg p-6">
          <h2
            class="text-xl p-4 font-bold text-center text-white bg-red-500 rounded-lg shadow-lg uppercase mb-4"
          >
            laporan pengeluaran
          </h2>
          <div class="bg-light rounded-lg shadow-lg">
            <div
              id="totalPengeluaran"
              class="p-2 font-bold text-primary text-center bg-red-300 mb-2 rounded-t-lg"
            ></div>
            <div
              id="lineChartPengeluaran"
              class="bg-white p-4 rounded-b-lg"
            ></div>
          </div>
        </section>

        <!-- Diagram (Bar Chart) -->
        <section class="flex flex-col rounded-2xl bg-white shadow-lg p-6">
          <div class="w-full md:w-1/2">
            <h2
              class="text-center font-bold text-primary mb-2 bg-red-300 p-2 rounded shadow-md"
            >
              Peringkat Kategori
            </h2>
            <div id="pieChartPengeluaran" class="w-full h-64"></div>
          </div>
          <div class="w-full md:w-1/2">
            <div id="progress-list-pengeluaran" class="space-y-4"></div>
          </div>
        </section>
        <!-- end diagram card  -->
      </div>
    </div>
    <!-- Home -->

    <!-- Footer -->
    <footer
      class="pt-4 pb-2 text-center text-sm lg:text-md font-medium text-light bg-primary-dark"
    >
      <p>&copy; 2025 Money Manager. All rights reserved.</p>
      <p class="mt-1">
        Designed by
        <a
          href="#"
          class="text-accent hover:font-medium hover:bg-accent hover:text-primary rounded-2xl px-2 transition duration-300 ease-in-out"
          >Pemrograman Web Team</a
        >
      </p>
    </footer>
    <!-- footer -->

    <!-- Java pemasukan -->
    <script>
      const tanggalPemasukkan = [
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "30",
      ];
      const dataPemasukkan = [0, 0, 0, 0, , 50000, 15000, 500, 3000];

      const optionsLinePemasukkan = {
        chart: { type: "line", height: 300 },
        series: [{ name: "Pemasukkan", data: dataPemasukkan }],
        xaxis: { categories: tanggalPemasukkan, title: { text: "Tanggal" } },
        yaxis: { title: { text: "Rupiah (Rp)" } },
        colors: ["#10B981"],
      };

      const chartLinePemasukkan = new ApexCharts(
        document.querySelector("#lineChartPemasukkan"),
        optionsLinePemasukkan
      );
      chartLinePemasukkan.render();

      const optionsPiePemasukkan = {
        chart: { type: "pie", height: 300 },
        labels: ["Gaji", "Bonus", "Hasil Jual", "Lainnya"],
        series: [50000, 15000, 5000, 3000],
        colors: ["#16A34A", "#22C55E", "#4ADE80", "#86EFAC"],
        legend: {
          show: false,
        },
      };

      // Progress dari Pie Chart
      const totalPiePemasukan = optionsPiePemasukkan.series.reduce(
        (a, b) => a + b,
        0
      );
      const progressContainerPemasukan = document.getElementById(
        "progress-list-pemasukkan"
      );

      const iconsPemasukan = {
        Gaji: "ðŸ’¼",
        Bonus: "ðŸŽ",
        "Hasil Jual": "ðŸ›’",
        Lainnya: "ðŸ“¦",
      };

      optionsPiePemasukkan.labels.forEach((label, i) => {
        const value = optionsPiePemasukkan.series[i];
        const percent = ((value / totalPiePemasukan) * 100).toFixed(1);
        const color = optionsPiePemasukkan.colors[i];
        const icon = iconsPemasukan[label] || "ðŸ’°";

        const item = document.createElement("div");
        item.innerHTML = `
        <div class="flex justify-between items-center mb-1">
          <div class="flex items-center space-x-2">
            <span class="text-lg">${icon}</span>
            <span class="text-sm font-medium text-gray-700">${
              i + 1
            } ${label}</span>
          </div>
          <div class="text-sm font-semibold text-gray-700">Rp${value.toLocaleString(
            "id-ID"
          )}</div>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div class="h-2 rounded-full" style="width: ${percent}%; background-color: ${color};"></div>
        </div>
      `;
        progressContainerPemasukan.appendChild(item);
      });
      const chartPiePemasukkan = new ApexCharts(
        document.querySelector("#pieChartPemasukkan"),
        optionsPiePemasukkan
      );
      chartPiePemasukkan.render();
      // Menghitung total pemasukkan
      const totalPemasukkan = dataPemasukkan.reduce((acc, val) => acc + val, 0);
      // Menampilkan total ke elemen HTML
      document.getElementById(
        "totalPemasukkan"
      ).innerText = `Total Pemasukkan: Rp ${totalPemasukkan.toLocaleString(
        "id-ID"
      )}`;
    </script>

    <!-- PEngeluaran -->
    <script>
      const tanggalPengeluaran = [
        "23",
        "24",
        "25",
        "26",
        "27",
        "28",
        "29",
        "30",
      ];
      const dataPengeluaran = [0, 0, 0, 0, 0, 8000, 1000, 2000];

      const optionsLinePengeluaran = {
        chart: { type: "line", height: 300 },
        series: [{ name: "Pengeluaran", data: dataPengeluaran }],
        xaxis: { categories: tanggalPengeluaran, title: { text: "Tanggal" } },
        yaxis: { title: { text: "Rupiah (Rp)" } },
        colors: ["#EF4444"],
      };

      const chartLinePengeluaran = new ApexCharts(
        document.querySelector("#lineChartPengeluaran"),
        optionsLinePengeluaran
      );
      chartLinePengeluaran.render();

      const optionsPiePengeluaran = {
        chart: { type: "pie", height: 300 },
        labels: ["Makan", "Laundry", "Sayuran", "Lainnya"],
        series: [47000, 11000, 11000, 8000],
        colors: ["#3B82F6", "#F97316", "#10B981", "#EAB308"],
        legend: {
          show: false,
        },
      };

      const totalPiePengeluaran = optionsPiePengeluaran.series.reduce(
        (a, b) => a + b,
        0
      );
      const progressContainerPengeluaran = document.getElementById(
        "progress-list-pengeluaran"
      );

      const iconsPengeluaran = {
        Makan: "ðŸ›",
        Laundry: "ðŸ§¼",
        Sayuran: "ðŸ¥¬",
        Lainnya: "ðŸ“¦",
      };

      optionsPiePengeluaran.labels.forEach((label, i) => {
        const value = optionsPiePengeluaran.series[i];
        const percent = ((value / totalPiePengeluaran) * 100).toFixed(1);
        const color = optionsPiePengeluaran.colors[i];
        const icon = iconsPengeluaran[label] || "ðŸ’°";

        const item = document.createElement("div");
        item.innerHTML = `
        <div class="flex justify-between items-center mb-1">
          <div class="flex items-center space-x-2">
            <span class="text-lg">${icon}</span>
            <span class="text-sm font-medium text-gray-700">${
              i + 1
            } ${label}</span>
          </div>
          <div class="text-sm font-semibold text-gray-700">Rp${value.toLocaleString(
            "id-ID"
          )}</div>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div class="h-2 rounded-full" style="width: ${percent}%; background-color: ${color};"></div>
        </div>
      `;
        progressContainerPengeluaran.appendChild(item);
      });

      const chartPiePengeluaran = new ApexCharts(
        document.querySelector("#pieChartPengeluaran"),
        optionsPiePengeluaran
      );
      chartPiePengeluaran.render();
      // Menghitung total pengeluaran
      const total = dataPengeluaran.reduce((acc, val) => acc + val, 0);

      // Menampilkan total ke elemen HTML
      document.getElementById(
        "totalPengeluaran"
      ).innerText = `Total Pengeluaran: Rp ${total.toLocaleString("id-ID")}`;
    </script>
  </body>
</html>
